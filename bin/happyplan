#!/usr/bin/env node

'use strict';

var packagePath = 'node_modules/happyplan';

// Internal libs.
var options = require('../lib/cli').options;
var info = require('../lib/info');

var localHappyplanExist = require('fs').existsSync(packagePath);

// Do stuff based on CLI options.
if (options.version) {
  info.version(localHappyplanExist ? process.cwd() + '/' + packagePath + '/package.json' : null);
}

if (!localHappyplanExist) {
  info.fatal('Unable to find local package ' + packagePath + '.', 99);
}

// launch grunt from happyplan dir, & pass the current cwd
var args = process.argv.slice(2);
args.push('-root=' + process.cwd());

require('child_process').spawn('grunt', args, {
  cwd: packagePath,
  stdio: 'inherit'
});
